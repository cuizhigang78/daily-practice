<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="504"/>

<div>
<span><div><div><h3><font face="宋体" style="font-size: 14pt;">一、索引简介</font></h3><div><font face="宋体" style="font-size: 14pt;">（一）索引是什么</font></div><ol><li><div><font face="宋体" style="font-size: 14pt;">MySql官方对索引的定义为：索引（index）是帮助MySQL高效获取数据的数据结构；</font></div></li><li><div><font face="宋体" style="font-size: 14pt;">可以简单地理解为“排好序的快速查找数据结构”；</font></div></li><li><div><font face="宋体" style="font-size: 14pt;">一般来说索引本身也很大，不可能全部存储在内存中，因此索引往往索引文件的形式存储在磁盘上；</font></div></li><li><div><font style="font-size: 14pt; font-family: 宋体;">我们平常所说的索引，如果没有特别指明，都是指B树（多路搜索树，并不一定是二叉的）结构组织的索引。其中聚集索引，次要索引，复合索引，前缀索引，唯一索引默认都是B+树索引，统称索引。除了B+树这种类型的索引之外，还有哈希索引（hash index）等。</font></div></li></ol><div><span style="font-size: 14pt; font-family: 宋体;">Tips:</span></div></div><ol><li><div><span style="font-size: 14pt; font-family: 宋体;">在数据之外，数据库系统还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用（指向）数据，这样就可以在这些数据结构上实现高级查找算法。这种数据结构，就是索引。</span></div></li></ol><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;">（二）索引的优势与劣势</span></div><ol><li><div><span style="font-size: 14pt; font-family: 宋体;">优势：</span></div></li></ol><ul><ul><li><div><span style="font-size: 14pt; font-family: 宋体;">类似图书馆书目索引，提高数据检索的效率，降低数据库的IO成本；</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">通过索引对数据进行排序，降低数据排序的成本，降低了CPU的消耗。</span></div></li></ul></ul><ol><li><div><span style="font-size: 14pt; font-family: 宋体;">劣势</span></div></li></ol><ul><ul><li><div><span style="font-size: 14pt; font-family: 宋体;">实际上索引也是一张表，保存了主键与索引字段，并指向实体表的记录，所以索引列也是要占用空间的</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">虽然索引大大提高了查询速度，但同时会降低更新表的速度，如对表进行INSERT、UPDATE、和DELETE。因为更新表时，MySQL不仅要保存数据，还要保存索引文件每次更新添加了索引列的字段。</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">索引只是提高效率的一个因素，如果你的MySQL有大数据量的表，就需要花时间研究建立最优秀的索引，或优化查询SQL。</span></div></li></ul></ul><div><span style="font-size: 14pt; font-family: 宋体;">（三）MySQL索引分类</span></div><ol><li><div><span style="font-size: 14pt; font-family: 宋体;">单值索引：即一个索引只包含单列，一个表可以有多个单列索引</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">唯一索引：索引列的值必须唯一，但允许有空值</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">复合索引：即一个索引包含多列</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">基本语句：</span></div></li></ol><ul><ul><li><div><span style="font-size: 14pt; font-family: 宋体;"><span>创建：CREATE [UNIQUE] INDEX indexName ON mytable (columnname(length));</span></span><span style="font-size: 14pt; font-family: 宋体;">ALTER mytable ADD [UNIQUE] INDEX [indexName] ON (columnname(length))</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;"><span>删除：DROP INDEX[indexName] ON mytable;</span></span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;"><span>查看：SHOW INDEX FROM table_name\G</span></span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;"><span>使用ALTER命令：   </span><br/></span></div></li></ul></ul><div><span style="font-size: 14pt; font-family: 宋体;">（四）MySQL索引结构</span></div><ol><li><div><span style="font-size: 14pt; font-family: 宋体;">BTree索引：</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">Hash索引：</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">full-text全文索引：</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">R-Tree索引：</span></div></li></ol><div><span style="font-size: 14pt; font-family: 宋体;">（五）哪些情况需要创建索引</span></div><ol><li><div><span style="font-size: 14pt; font-family: 宋体;">主键自动建立唯一索引；</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">频繁作为查询条件的字段应该创建索引；</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">查询中与其他表关联的字段，外键关系建立索引；</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">频繁更新的字段不适合创建索引（因为每次更新不单单是更新记录还会更新索引）；</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">Where条件里用不到的字段不创建索引；</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">单键/组合索引的选择问题，who？（在高并发下倾向组合索引）；</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">查询中排序的字段，排序字段若通过索引去访问将大大提高排序速度；</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">查询中统计或者分组的字段；</span></div></li></ol><div><span style="font-size: 14pt; font-family: 宋体;">（六）哪些情况不需要创建索引</span></div><ol><li><div><span style="font-size: 14pt; font-family: 宋体;">表记录太少；</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">经常增删改的表；</span></div></li><li><div><span style="font-size: 14pt; font-family: 宋体;">如果某个数据列包含大量重复的内容，为它建立索引就没有太大效果。</span></div></li></ol><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;">五</span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><span style="font-size: 14pt; font-family: 宋体;"><br/></span></div><div><font style="font-size: 14pt;"><br/></font></div></div></span>
</div></body></html> 